<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>Open AI Demo</title>
    <link rel="stylesheet" href="dist/style.css">
  </head>
  <body>
    <div id="app">{{msg}}</div>
		<script src="dist/build.js"></script>
    <script type="text/javascript" charset="utf-8">
			const iOSVersion = navigator.appVersion || ''// str.match(/cpu iphone os (.*?) like mac os/)
			const isiOS = !!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)
			var bindingMark = 'data-element-binding'
			function Element (id, initData) {
				var self = this
				var el = self.el = document.getElementById(id)
				var bindings = {} // the internal copy
				var data 	 = self.data = {} // the external interface
				var content = el.innerHTML.replace(/\{\{(.*)\}\}/g, markToken)
				el.innerHTML = content

				for (var variable in bindings) {
					bind(variable)
				}
				if (initData) {
					for (var variable2 in initData) {
						data[variable2] = initData[variable2]
					}
				}
				function markToken (match, variable) {
					bindings[variable] = {}
					return '<span ' + bindingMark + '="' + variable + '"></span>'
				}

				function bind (variable) {
					bindings[variable].els = el.querySelectorAll('[' + bindingMark + '="' + variable + '"]')
					;[].forEach.call(bindings[variable].els, function (e) {
						e.removeAttribute(bindingMark)
					})
					Object.defineProperty(data, variable, {
						set: function (newVal) {
							[].forEach.call(bindings[variable].els, function (e) {
								bindings[variable].value = e.textContent = newVal
							})
						},
						get: function () {
							return bindings[variable].value
						}
					})
				}
			}
			if (isiOS) {
				var appVersion = parseInt(iOSVersion.match(/OS (\d+)_(\d+)_?(\d+)?/)[1], 10)
				if (appVersion < 4) {
					// console.log(vueInstance)
					var text = 'hello!你的系统 iOS' + appVersion + '版本过低，但是支持defineProperty'
					var vueInstance = new Element('app', {
						msg: text
					})

				}
			}
      if (/Atom/.test(window.navigator.userAgent)) {
        console.log('Welcome to Electron')
        document.title = 'Power by Electron 2013.8'
        var ipc = require('ipc');
        window.addEventListener('contextmenu', function (e) {
          e.preventDefault();
          ipc.send('menu');
        }, false);
      }
    </script>
  </body>
</html>